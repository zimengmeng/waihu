<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>系统管理平台</title>
    <link rel="stylesheet" type="text/css" href="../common/css/common.css" />
    <link rel="stylesheet" type="text/css" href="../common/plugins/poshytip/style.css" />
    <link rel="stylesheet" type="text/css" href="../common/css/table.css" />
    <script type="text/javascript" src="../common/js/jquery.min.js"></script>
    <script type="text/javascript" src="../common/plugins/lhgdialog/lhgdialog.min.js?skin=discuz"></script>
    <script type="text/javascript" src="../common/plugins/poshytip/jquery.poshytip.min.js"></script>
    <script type="text/javascript" src="../common/plugins/validationPoshytip/validation.js"></script>
    <script type="text/javascript" src="../common/plugins/validationPoshytip/validationConstants.js"></script>
    <script type="text/javascript" src="../common/js/common.js"></script>
    <script type="text/javascript" src="../common/js/jquery.form.js"></script>

    <script>
        function pageLoadData() {
            $(".power-view-file-submit").click(function () {
                showLoading();
                var options = {
                    url: '/api/toms/task/import', // 请求路径，同form的action
                    type: 'post',
                    success: function (result) {
                        hideLoading();
                        alert(result.ret_msg);
                    },
                    error: function (xhr, status, msg) {
                        alert("状态码 " + status + "; " + msg)
                    }
                }
                $("#power-view-file-form").ajaxSubmit(options);
            })
        }
            // var file = {}
            // var fileInput = document.getElementById('fileInput')
            // fileInput.onchange = function (e) {
            //    file = e.target.files[0]
            // }
            // function uploadFile() {
            //     var requestObj = {
            //         name: file
            //     }
            //     AjaxPost("/api/toms/task/import", function(data) {
            //         console.log(data)
            //         alert(data.ret_msg);
            //     },requestObj)
            // }
    </script>
</head>

<body onload="pageLoadData();" id="body">
    <div style="width: 100%;height: 50px;margin-top: 50px;display: flex;">
        <form id="power-view-file-form" method="post" enctype="multipart/form-data" action="/api/toms/task/import">
            <input type="file" id="fileInput" class="power-view-file-image" name="file" />
            <input type="button" class="power-view-file-submit" style="cursor: pointer;width:64px;" value="提交" />
        </form>
    </div>
</body>
</html>
